# =============================================================================
# API LICENSING - CONFIGURACAO DE AMBIENTE
# =============================================================================
# Copie este arquivo para .env e preencha os valores

# -----------------------------------------------------------------------------
# DATABASE
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://user:password@localhost:5432/licensing

# -----------------------------------------------------------------------------
# STRIPE
# Configure no Stripe Dashboard: https://dashboard.stripe.com/
# -----------------------------------------------------------------------------

# Chave secreta (Developers > API Keys)
# Comeca com sk_test_ (teste) ou sk_live_ (producao)
STRIPE_SECRET_KEY=sk_test_xxx

# Chave publicavel (para frontend, se necessario)
STRIPE_PUBLISHABLE_KEY=pk_test_xxx

# Webhook Secret (Developers > Webhooks > Signing secret)
# Comeca com whsec_
STRIPE_WEBHOOK_SECRET=whsec_xxx

# -----------------------------------------------------------------------------
# STRIPE PRICE IDS (IMPORTANTE!)
# Crie os produtos e precos no Stripe Dashboard e atualize em:
# app/services/stripe_service.py > PRICE_IDS
#
# Ou use variaveis de ambiente (requer modificar o codigo):
# -----------------------------------------------------------------------------
# Plano Professional - R$ 29,90/mes | R$ 299,00/ano
# STRIPE_PRICE_PROFESSIONAL_MONTHLY=price_xxx
# STRIPE_PRICE_PROFESSIONAL_YEARLY=price_xxx

# Plano Enterprise - R$ 99,90/mes | R$ 999,00/ano
# STRIPE_PRICE_ENTERPRISE_MONTHLY=price_xxx
# STRIPE_PRICE_ENTERPRISE_YEARLY=price_xxx

# -----------------------------------------------------------------------------
# APPLICATION
# -----------------------------------------------------------------------------
SECRET_KEY=your-secret-key-here
ENVIRONMENT=development
DEBUG=true

# Server
HOST=0.0.0.0
PORT=8000

# Frontend URL (para redirecionamentos)
FRONTEND_URL=http://localhost:3000
API_URL=http://localhost:8000

# CORS Origins (separados por virgula)
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# Trial period (dias)
TRIAL_DAYS=7

# -----------------------------------------------------------------------------
# JWT
# -----------------------------------------------------------------------------
JWT_SECRET_KEY=your-jwt-secret-key-here
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# -----------------------------------------------------------------------------
# Google OAuth (opcional)
# -----------------------------------------------------------------------------
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=http://localhost:8000/api/v1/auth/google/callback

# Session secret for OAuth state
SESSION_SECRET_KEY=your-session-secret-key-here

# -----------------------------------------------------------------------------
# REDIS (opcional, para cache)
# -----------------------------------------------------------------------------
REDIS_URL=redis://localhost:6379/0

# -----------------------------------------------------------------------------
# RESILIENCE & VISUAL FALLBACK
# Quando seletores falham, a cascata é: CSS → Selector Store → (visual)
# O visual fallback (screenshot + ARIA) é SEMPRE ativo — retorna estado
# visual para o Claude caller analisar (sem chamada API extra).
#
# AGENT_FALLBACK_ENABLED ativa chamada Claude API para descobrir seletores
# automaticamente. Só ativar em execução AUTÔNOMA (scripts/cron) onde não
# há um Claude como caller (senão é Claude chamando Claude, redundante).
# -----------------------------------------------------------------------------
AGENT_FALLBACK_ENABLED=false
ANTHROPIC_API_KEY=sk-ant-xxx
AGENT_FALLBACK_MODEL=claude-sonnet-4-20250514
RESILIENCE_FAIL_FAST_MS=3000
RESILIENCE_MAX_RETRIES=2
RESILIENCE_RETRY_BACKOFF_MS=500
SELECTOR_STORE_PATH=~/.sei-mcp/selector-cache.json
